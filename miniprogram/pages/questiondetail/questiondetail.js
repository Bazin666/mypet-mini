"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var api_1 = require("../../utils/api");
Page({
    data: {
        title: "",
        textarea_num: "0/200",
        context: "",
        question_detail: {
            qid: Number,
            context: String,
            title: String
        },
    },
    changeText: function (e) {
        var value = e.detail.value;
        this.setData({
            context: value,
            textarea_num: value.length + "/" + "200",
            question_detail: {
                context: value,
                title: this.data.question_detail.title,
                qid: this.data.question_detail.qid
            }
        });
    },
    onLoad: function (options) {
        var qid = options.id;
        var _this = this;
        console.log(qid);
        api_1.question_one({
            qid: qid
        }, function (result) {
            _this.setData({
                question_detail: result.data
            });
        });
    },
    submit: function () {
        var _this = this;
        var qid = _this.data.question_detail.qid;
        api_1.question_rev(this.data.question_detail, function () {
            api_1.question_one({
                qid: qid
            }, function (result) {
                _this.setData({
                    question_detail: result.data
                });
            });
        });
    },
    delete: function () {
        var _this = this;
        api_1.question_delete(this.data.question_detail, function (res) {
            res;
            _this.success_delete();
        });
    },
    success_delete: function () {
        wx.navigateBack({
            delta: 1,
        });
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicXVlc3Rpb25kZXRhaWwuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJxdWVzdGlvbmRldGFpbC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLHVDQUE2RTtBQUc3RSxJQUFJLENBQUM7SUFLRCxJQUFJLEVBQUU7UUFDRixLQUFLLEVBQUMsRUFBRTtRQUNSLFlBQVksRUFBQyxPQUFPO1FBQ3BCLE9BQU8sRUFBQyxFQUFFO1FBQ1YsZUFBZSxFQUFDO1lBQ1osR0FBRyxFQUFDLE1BQU07WUFDVixPQUFPLEVBQUMsTUFBTTtZQUNkLEtBQUssRUFBQyxNQUFNO1NBQ2Y7S0FDSjtJQU1ELFVBQVUsWUFBQyxDQUFLO1FBQ1osSUFBSSxLQUFLLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUE7UUFDMUIsSUFBSSxDQUFDLE9BQU8sQ0FBQztZQUNULE9BQU8sRUFBQyxLQUFLO1lBQ2IsWUFBWSxFQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUMsR0FBRyxHQUFDLEtBQUs7WUFDbkMsZUFBZSxFQUFDO2dCQUNaLE9BQU8sRUFBQyxLQUFLO2dCQUNiLEtBQUssRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLGVBQXVCLENBQUMsS0FBSztnQkFDOUMsR0FBRyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsZUFBdUIsQ0FBQyxHQUFHO2FBQzdDO1NBQ0osQ0FBQyxDQUFBO0lBRU4sQ0FBQztJQUVELE1BQU0sWUFBQyxPQUFZO1FBQ2hCLElBQUksR0FBRyxHQUFHLE9BQU8sQ0FBQyxFQUFFLENBQUE7UUFDcEIsSUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFBO1FBQ2hCLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUE7UUFDaEIsa0JBQVksQ0FBQztZQUNULEdBQUcsRUFBQyxHQUFHO1NBQ1YsRUFBQyxVQUFDLE1BQVk7WUFDWCxLQUFLLENBQUMsT0FBTyxDQUFDO2dCQUNULGVBQWUsRUFBQyxNQUFNLENBQUMsSUFBSTthQUMvQixDQUFDLENBQUE7UUFDTixDQUFDLENBQUMsQ0FBQTtJQUlMLENBQUM7SUFDRCxNQUFNO1FBQ0YsSUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFBO1FBQ2hCLElBQUksR0FBRyxHQUFJLEtBQUssQ0FBQyxJQUFJLENBQUMsZUFBd0IsQ0FBQyxHQUFHLENBQUE7UUFDbEQsa0JBQVksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLGVBQXNCLEVBQy9CO1lBQ0Usa0JBQVksQ0FBQztnQkFDVCxHQUFHLEVBQUMsR0FBRzthQUNWLEVBQUMsVUFBQyxNQUFZO2dCQUNYLEtBQUssQ0FBQyxPQUFPLENBQUM7b0JBQ1QsZUFBZSxFQUFDLE1BQU0sQ0FBQyxJQUFJO2lCQUMvQixDQUFDLENBQUE7WUFDTixDQUFDLENBQUMsQ0FBQTtRQUNKLENBQUMsQ0FBRyxDQUFBO0lBQ3RCLENBQUM7SUFDRCxNQUFNO1FBQ0YsSUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFBO1FBQ2hCLHFCQUFlLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxlQUFzQixFQUNsQyxVQUFDLEdBQVE7WUFDTCxHQUFHLENBQUE7WUFDTCxLQUFLLENBQUMsY0FBYyxFQUFFLENBQUE7UUFDeEIsQ0FBQyxDQUFHLENBQUE7SUFDdEIsQ0FBQztJQUNELGNBQWM7UUFDVixFQUFFLENBQUMsWUFBWSxDQUFDO1lBQ1osS0FBSyxFQUFDLENBQUM7U0FDVixDQUFDLENBQUE7SUFDTixDQUFDO0NBRUYsQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcXVlc3Rpb25fb25lLCBxdWVzdGlvbl9yZXYsIHF1ZXN0aW9uX2RlbGV0ZSB9IGZyb20gXCIuLi8uLi91dGlscy9hcGlcIlxyXG5cclxuLy8gY29tcG9uZW50cy9lZGl0b3IvZWRpdG9yLmpzXHJcblBhZ2Uoe1xyXG5cclxuICAgIC8qKlxyXG4gICAgICog57uE5Lu255qE5Yid5aeL5pWw5o2uXHJcbiAgICAgKi9cclxuICAgIGRhdGE6IHtcclxuICAgICAgICB0aXRsZTpcIlwiLFxyXG4gICAgICAgIHRleHRhcmVhX251bTpcIjAvMjAwXCIsXHJcbiAgICAgICAgY29udGV4dDpcIlwiLFxyXG4gICAgICAgIHF1ZXN0aW9uX2RldGFpbDp7XHJcbiAgICAgICAgICAgIHFpZDpOdW1iZXIsXHJcbiAgICAgICAgICAgIGNvbnRleHQ6U3RyaW5nLFxyXG4gICAgICAgICAgICB0aXRsZTpTdHJpbmdcclxuICAgICAgICB9LFxyXG4gICAgfSxcclxuICBcclxuICAgIC8qKlxyXG4gICAgICog57uE5Lu255qE5pa55rOV5YiX6KGoXHJcbiAgICAgKi9cclxuXHJcbiAgICBjaGFuZ2VUZXh0KGU6YW55KXtcclxuICAgICAgICB2YXIgdmFsdWUgPSBlLmRldGFpbC52YWx1ZVxyXG4gICAgICAgIHRoaXMuc2V0RGF0YSh7XHJcbiAgICAgICAgICAgIGNvbnRleHQ6dmFsdWUsXHJcbiAgICAgICAgICAgIHRleHRhcmVhX251bTp2YWx1ZS5sZW5ndGgrXCIvXCIrXCIyMDBcIixcclxuICAgICAgICAgICAgcXVlc3Rpb25fZGV0YWlsOntcclxuICAgICAgICAgICAgICAgIGNvbnRleHQ6dmFsdWUsXHJcbiAgICAgICAgICAgICAgICB0aXRsZToodGhpcy5kYXRhLnF1ZXN0aW9uX2RldGFpbCBhcyBhbnkpLnRpdGxlLFxyXG4gICAgICAgICAgICAgICAgcWlkOih0aGlzLmRhdGEucXVlc3Rpb25fZGV0YWlsIGFzIGFueSkucWlkXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIFxyXG4gICAgfSxcclxuXHJcbiAgICBvbkxvYWQob3B0aW9ucyA6YW55KXtcclxuICAgICAgIHZhciBxaWQgPSBvcHRpb25zLmlkXHJcbiAgICAgICB2YXIgX3RoaXMgPSB0aGlzXHJcbiAgICAgICBjb25zb2xlLmxvZyhxaWQpXHJcbiAgICAgICBxdWVzdGlvbl9vbmUoe1xyXG4gICAgICAgICAgIHFpZDpxaWRcclxuICAgICAgIH0sKHJlc3VsdCA6IGFueSkgPT4ge1xyXG4gICAgICAgICAgIF90aGlzLnNldERhdGEoe1xyXG4gICAgICAgICAgICAgICAgcXVlc3Rpb25fZGV0YWlsOnJlc3VsdC5kYXRhXHJcbiAgICAgICAgICAgfSlcclxuICAgICAgIH0pXHJcblxyXG5cclxuICAgICAgIFxyXG4gICAgfSxcclxuICAgIHN1Ym1pdCgpe1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXNcclxuICAgICAgICB2YXIgcWlkID0gKF90aGlzLmRhdGEucXVlc3Rpb25fZGV0YWlsIGFzIGFueSApLnFpZFxyXG4gICAgICAgIHF1ZXN0aW9uX3Jldih0aGlzLmRhdGEucXVlc3Rpb25fZGV0YWlsIGFzIGFueSxcclxuICAgICAgICAgICAgICAgICAgICAgICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcXVlc3Rpb25fb25lKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHFpZDpxaWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwocmVzdWx0IDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zZXREYXRhKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlc3Rpb25fZGV0YWlsOnJlc3VsdC5kYXRhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgfSAgKVxyXG4gICAgfSxcclxuICAgIGRlbGV0ZSgpe1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXNcclxuICAgICAgICBxdWVzdGlvbl9kZWxldGUodGhpcy5kYXRhLnF1ZXN0aW9uX2RldGFpbCBhcyBhbnksXHJcbiAgICAgICAgICAgICAgICAgICAgICAocmVzIDphbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICByZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc3VjY2Vzc19kZWxldGUoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgfSAgKVxyXG4gICAgfSxcclxuICAgIHN1Y2Nlc3NfZGVsZXRlKCl7XHJcbiAgICAgICAgd3gubmF2aWdhdGVCYWNrKHtcclxuICAgICAgICAgICAgZGVsdGE6MSxcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICB9KVxyXG4gICJdfQ==