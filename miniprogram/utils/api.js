"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var config_1 = require("./config");
var util_1 = require("./util");
var conf = config_1.default;
var res = wx.request;
exports.login = function (data, success_function, fail_function) {
    res({
        url: conf.login_url,
        data: data,
        method: "POST",
        header: conf.header,
        success: function (res) {
            var data = res.data;
            if (data.user && data.token) {
                wx.setStorageSync('user_token', data.token);
                wx.setStorageSync('current_user', data.user);
                config_1.default.header.Authorization = data.token;
                config_1.default.header.User = data.user;
                success_function();
            }
            else {
                fail_function();
            }
        }
    });
};
exports.wx_login_api = function (data, success_function, fail_function) {
    if (fail_function === void 0) { fail_function = function () { }; }
    res({
        url: conf.wx_login_url,
        data: data,
        method: "POST",
        header: conf.header,
        success: function (res) {
            var data = res.data;
            if (data.user && data.token) {
                wx.setStorageSync('user_token', data.token);
                wx.setStorageSync('current_user', data.user);
                config_1.default.header.Authorization = data.token;
                config_1.default.header.User = data.user;
                success_function();
            }
            else {
                fail_function();
            }
        }
    });
};
exports.question_add = function (data) {
    res({
        url: conf.question_add_url,
        data: data,
        method: "POST",
        header: conf.header,
        success: function () {
        }
    });
};
exports.question_change = function (data, success_function) {
    res({
        url: conf.question_change_url,
        data: data,
        method: "POST",
        success: function (res) {
            success_function(res);
        }
    });
};
exports.question_list = function (success_function) {
    res({
        url: conf.question_list_url,
        method: "GET",
        header: conf.header,
        data: { userid: util_1.getUserID() },
        success: function (res) {
            if (success_function) {
                success_function(res);
            }
        },
    });
};
exports.question_list_all = function (success_function) {
    res({
        url: conf.question_list_url_all,
        method: "GET",
        header: conf.header,
        success: function (res) {
            if (success_function) {
                success_function(res);
            }
        },
    });
};
exports.question_one = function (data, success_function) {
    res({
        url: conf.question_one,
        method: "GET",
        header: conf.header,
        data: data,
        success: function (res) {
            if (success_function) {
                success_function(res);
            }
        },
    });
};
exports.question_rev = function (data, success_function) {
    res({
        url: conf.question_rev,
        method: "POST",
        header: conf.header,
        data: data,
        success: function (res) {
            if (success_function) {
                success_function(res);
            }
        },
    });
};
exports.question_delete = function (data, success_function) {
    res({
        url: conf.question_delete,
        method: "POST",
        header: conf.header,
        data: data,
        success: function (res) {
            if (success_function) {
                success_function(res);
            }
        },
    });
};
exports.comment_add = function (data, success_function) {
    res({
        url: conf.comment_add,
        data: data,
        method: "POST",
        header: conf.header,
        success: function (res) {
            success_function(res);
        }
    });
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBpLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiYXBpLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsbUNBQTZCO0FBQzdCLCtCQUFrQztBQUNsQyxJQUFNLElBQUksR0FBRyxnQkFBTSxDQUFBO0FBQ25CLElBQU0sR0FBRyxHQUFHLEVBQUUsQ0FBQyxPQUFPLENBQUE7QUFnQlQsUUFBQSxLQUFLLEdBQUcsVUFBQyxJQUFRLEVBQUMsZ0JBQXlCLEVBQUMsYUFBc0I7SUFDM0UsR0FBRyxDQUFDO1FBQ0EsR0FBRyxFQUFDLElBQUksQ0FBQyxTQUFTO1FBQ2xCLElBQUksRUFBQyxJQUFJO1FBQ1QsTUFBTSxFQUFDLE1BQU07UUFDYixNQUFNLEVBQUMsSUFBSSxDQUFDLE1BQU07UUFDbEIsT0FBTyxFQUFDLFVBQUEsR0FBRztZQUNQLElBQU0sSUFBSSxHQUFRLEdBQUcsQ0FBQyxJQUFJLENBQUE7WUFDMUIsSUFBRyxJQUFJLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQyxLQUFLLEVBQUM7Z0JBQ3ZCLEVBQUUsQ0FBQyxjQUFjLENBQUMsWUFBWSxFQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQTtnQkFDMUMsRUFBRSxDQUFDLGNBQWMsQ0FBQyxjQUFjLEVBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFBO2dCQUMzQyxnQkFBTSxDQUFDLE1BQU0sQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQTtnQkFDeEMsZ0JBQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUE7Z0JBQzlCLGdCQUFnQixFQUFFLENBQUE7YUFDckI7aUJBQUk7Z0JBQ0QsYUFBYSxFQUFFLENBQUE7YUFDbEI7UUFDTCxDQUFDO0tBQ0osQ0FBQyxDQUFBO0FBQ04sQ0FBQyxDQUFBO0FBRVksUUFBQSxZQUFZLEdBQUcsVUFBQyxJQUFRLEVBQUMsZ0JBQXlCLEVBQUMsYUFBK0I7SUFBL0IsOEJBQUEsRUFBQSw4QkFBOEIsQ0FB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QUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY29uZmlnIGZyb20gJy4vY29uZmlnJ1xyXG5pbXBvcnQgeyBnZXRVc2VySUQgfSBmcm9tICcuL3V0aWwnXHJcbmNvbnN0IGNvbmYgPSBjb25maWdcclxuY29uc3QgcmVzID0gd3gucmVxdWVzdFxyXG5cclxuXHJcbi8qKlxyXG4gKiBcclxuICogQHBhcmFtIGRhdGEg55m76ZmG5pC65bim5pWw5o2uXHJcbiAqIEBwYXJhbSBzdWNjZXNzX2Z1bnRpb24g55m75b2V5oiQ5Yqf5ZCO5omn6KGM5Ye95pWwXHJcbiAqIEBwYXJhbSBmYWlsX2Z1bmN0aW9uIOeZu+W9leWksei0peWQjuaJp+ihjOWHveaVsFxyXG4gKiAgXHJcbiAqIEBleGFtcGxlIGxvZ2luKGluZm8sKCk9PntcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3N1Y2Nlc3MnKVxyXG4gICAgICAgIH0sKCkgPT4ge1xyXG4gICAgICAgICAgIGNvbnNvbGUubG9nKCdmYWlsJylcclxuICAgICAgICB9KVxyXG4gKi9cclxuXHJcbmV4cG9ydCBjb25zdCBsb2dpbiA9IChkYXRhOmFueSxzdWNjZXNzX2Z1bmN0aW9uOkZ1bmN0aW9uLGZhaWxfZnVuY3Rpb246RnVuY3Rpb24pID0+IHtcclxuICAgIHJlcyh7XHJcbiAgICAgICAgdXJsOmNvbmYubG9naW5fdXJsLFxyXG4gICAgICAgIGRhdGE6ZGF0YSxcclxuICAgICAgICBtZXRob2Q6XCJQT1NUXCIsXHJcbiAgICAgICAgaGVhZGVyOmNvbmYuaGVhZGVyLFxyXG4gICAgICAgIHN1Y2Nlc3M6cmVzID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZGF0YSA6YW55ID0gcmVzLmRhdGFcclxuICAgICAgICAgICAgaWYoZGF0YS51c2VyICYmIGRhdGEudG9rZW4pe1xyXG4gICAgICAgICAgICAgICAgd3guc2V0U3RvcmFnZVN5bmMoJ3VzZXJfdG9rZW4nLGRhdGEudG9rZW4pXHJcbiAgICAgICAgICAgICAgICB3eC5zZXRTdG9yYWdlU3luYygnY3VycmVudF91c2VyJyxkYXRhLnVzZXIpXHJcbiAgICAgICAgICAgICAgICBjb25maWcuaGVhZGVyLkF1dGhvcml6YXRpb24gPSBkYXRhLnRva2VuXHJcbiAgICAgICAgICAgICAgICBjb25maWcuaGVhZGVyLlVzZXIgPSBkYXRhLnVzZXJcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3NfZnVuY3Rpb24oKVxyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIGZhaWxfZnVuY3Rpb24oKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHd4X2xvZ2luX2FwaSA9IChkYXRhOmFueSxzdWNjZXNzX2Z1bmN0aW9uOkZ1bmN0aW9uLGZhaWxfZnVuY3Rpb246RnVuY3Rpb24gPSAoKT0+e30pPT57XHJcbiAgICByZXMoe1xyXG4gICAgICAgIHVybDpjb25mLnd4X2xvZ2luX3VybCxcclxuICAgICAgICBkYXRhOmRhdGEsXHJcbiAgICAgICAgbWV0aG9kOlwiUE9TVFwiLFxyXG4gICAgICAgIGhlYWRlcjpjb25mLmhlYWRlcixcclxuICAgICAgICBzdWNjZXNzOihyZXMpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZGF0YSA6YW55ID0gcmVzLmRhdGFcclxuICAgICAgICAgICAgaWYoZGF0YS51c2VyICYmIGRhdGEudG9rZW4pe1xyXG4gICAgICAgICAgICAgICAgd3guc2V0U3RvcmFnZVN5bmMoJ3VzZXJfdG9rZW4nLGRhdGEudG9rZW4pXHJcbiAgICAgICAgICAgICAgICB3eC5zZXRTdG9yYWdlU3luYygnY3VycmVudF91c2VyJyxkYXRhLnVzZXIpXHJcbiAgICAgICAgICAgICAgICBjb25maWcuaGVhZGVyLkF1dGhvcml6YXRpb24gPSBkYXRhLnRva2VuXHJcbiAgICAgICAgICAgICAgICBjb25maWcuaGVhZGVyLlVzZXIgPSBkYXRhLnVzZXJcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3NfZnVuY3Rpb24oKVxyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIGZhaWxfZnVuY3Rpb24oKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHF1ZXN0aW9uX2FkZCA9IChkYXRhOmFueSk9PntcclxuICAgIHJlcyh7XHJcbiAgICAgICAgdXJsOmNvbmYucXVlc3Rpb25fYWRkX3VybCxcclxuICAgICAgICBkYXRhOmRhdGEsXHJcbiAgICAgICAgbWV0aG9kOlwiUE9TVFwiLFxyXG4gICAgICAgIGhlYWRlcjpjb25mLmhlYWRlcixcclxuICAgICAgICBzdWNjZXNzOigpID0+IHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHF1ZXN0aW9uX2NoYW5nZSA9IChkYXRhOmFueSxzdWNjZXNzX2Z1bmN0aW9uOkZ1bmN0aW9uKT0+e1xyXG4gICAgcmVzKHtcclxuICAgICAgICB1cmw6Y29uZi5xdWVzdGlvbl9jaGFuZ2VfdXJsLFxyXG4gICAgICAgIGRhdGE6ZGF0YSxcclxuICAgICAgICBtZXRob2Q6XCJQT1NUXCIsXHJcbiAgICAgICAgc3VjY2VzczoocmVzKSA9PiB7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3NfZnVuY3Rpb24ocmVzKVxyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbn1cclxuZXhwb3J0IGNvbnN0IHF1ZXN0aW9uX2xpc3QgPSAoc3VjY2Vzc19mdW5jdGlvbj86RnVuY3Rpb24pPT57XHJcbiAgICByZXMoe1xyXG4gICAgICAgIHVybDpjb25mLnF1ZXN0aW9uX2xpc3RfdXJsLFxyXG4gICAgICAgIG1ldGhvZDpcIkdFVFwiLFxyXG4gICAgICAgIGhlYWRlcjpjb25mLmhlYWRlcixcclxuICAgICAgICBkYXRhOnt1c2VyaWQ6Z2V0VXNlcklEKCl9LFxyXG4gICAgICAgIHN1Y2Nlc3M6KHJlcykgPT4ge1xyXG4gICAgICAgICAgICBpZihzdWNjZXNzX2Z1bmN0aW9uKXtcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3NfZnVuY3Rpb24ocmVzKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgIH0pXHJcbn1cclxuZXhwb3J0IGNvbnN0IHF1ZXN0aW9uX2xpc3RfYWxsID0gKHN1Y2Nlc3NfZnVuY3Rpb24/OkZ1bmN0aW9uKT0+e1xyXG4gICAgcmVzKHtcclxuICAgICAgICB1cmw6Y29uZi5xdWVzdGlvbl9saXN0X3VybF9hbGwsXHJcbiAgICAgICAgbWV0aG9kOlwiR0VUXCIsXHJcbiAgICAgICAgaGVhZGVyOmNvbmYuaGVhZGVyLFxyXG4gICAgICAgIHN1Y2Nlc3M6KHJlcykgPT4ge1xyXG4gICAgICAgICAgICBpZihzdWNjZXNzX2Z1bmN0aW9uKXtcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3NfZnVuY3Rpb24ocmVzKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgIH0pXHJcbn1cclxuZXhwb3J0IGNvbnN0IHF1ZXN0aW9uX29uZSA9IChkYXRhOntxaWQ6IG51bWJlciB9LHN1Y2Nlc3NfZnVuY3Rpb24/OkZ1bmN0aW9uKT0+e1xyXG4gICAgcmVzKHtcclxuICAgICAgICB1cmw6Y29uZi5xdWVzdGlvbl9vbmUsXHJcbiAgICAgICAgbWV0aG9kOlwiR0VUXCIsXHJcbiAgICAgICAgaGVhZGVyOmNvbmYuaGVhZGVyLFxyXG4gICAgICAgIGRhdGE6ZGF0YSxcclxuICAgICAgICBzdWNjZXNzOihyZXMpID0+IHtcclxuICAgICAgICAgICAgaWYoc3VjY2Vzc19mdW5jdGlvbil7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzX2Z1bmN0aW9uKHJlcylcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICB9KVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgcXVlc3Rpb25fcmV2ID0gKGRhdGE6e3FpZDogbnVtYmVyLHRpdGxlOnN0cmluZyxjb250ZXh0OnN0cmluZyB9LHN1Y2Nlc3NfZnVuY3Rpb24/OkZ1bmN0aW9uKT0+e1xyXG4gICAgcmVzKHtcclxuICAgICAgICB1cmw6Y29uZi5xdWVzdGlvbl9yZXYsXHJcbiAgICAgICAgbWV0aG9kOlwiUE9TVFwiLFxyXG4gICAgICAgIGhlYWRlcjpjb25mLmhlYWRlcixcclxuICAgICAgICBkYXRhOmRhdGEsXHJcbiAgICAgICAgc3VjY2VzczoocmVzKSA9PiB7XHJcbiAgICAgICAgICAgIGlmKHN1Y2Nlc3NfZnVuY3Rpb24pe1xyXG4gICAgICAgICAgICAgICAgc3VjY2Vzc19mdW5jdGlvbihyZXMpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgfSlcclxufVxyXG5cclxuXHJcbmV4cG9ydCBjb25zdCBxdWVzdGlvbl9kZWxldGUgPSAoZGF0YTp7cWlkOiBudW1iZXIsdGl0bGU6c3RyaW5nLGNvbnRleHQ6c3RyaW5nIH0sc3VjY2Vzc19mdW5jdGlvbj86RnVuY3Rpb24pPT57XHJcbiAgICByZXMoe1xyXG4gICAgICAgIHVybDpjb25mLnF1ZXN0aW9uX2RlbGV0ZSxcclxuICAgICAgICBtZXRob2Q6XCJQT1NUXCIsXHJcbiAgICAgICAgaGVhZGVyOmNvbmYuaGVhZGVyLFxyXG4gICAgICAgIGRhdGE6ZGF0YSxcclxuICAgICAgICBzdWNjZXNzOihyZXMpID0+IHtcclxuICAgICAgICAgICAgaWYoc3VjY2Vzc19mdW5jdGlvbil7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzX2Z1bmN0aW9uKHJlcylcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICB9KVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgY29tbWVudF9hZGQgPSAoZGF0YTp7cWlkOm51bWJlcixjb21tZW50X2NvbnRleHQ6c3RyaW5nfSxzdWNjZXNzX2Z1bmN0aW9uOkZ1bmN0aW9uKT0+e1xyXG4gICAgcmVzKHtcclxuICAgICAgICB1cmw6Y29uZi5jb21tZW50X2FkZCxcclxuICAgICAgICBkYXRhOmRhdGEsXHJcbiAgICAgICAgbWV0aG9kOlwiUE9TVFwiLFxyXG4gICAgICAgIGhlYWRlcjpjb25mLmhlYWRlcixcclxuICAgICAgICBzdWNjZXNzOihyZXMpID0+IHtcclxuICAgICAgICAgICAgc3VjY2Vzc19mdW5jdGlvbihyZXMpXHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxufVxyXG4iXX0=